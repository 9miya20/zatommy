services:
  auth:
    build:
      context: .
      dockerfile: apps/auth/Dockerfile
    ports:
      - "38200:38200"
    environment:
      - AUTH0_DOMAIN=your-tenant.auth0.com
      - AUTH0_CLIENT_ID=xxx
      - AUTH0_CLIENT_SECRET=xxx
      - AUTH0_AUDIENCE=https://api.zatommy.example.com
      - ALLOWED_REDIRECT_URIS=http://localhost:38100

  that-me:
    build:
      context: .
      dockerfile: apps/that-me/Dockerfile
    ports:
      - "38100:38100"
    volumes:
      - ./apps/that-me/src:/app/apps/that-me/src
      - ./apps/that-me/static:/app/apps/that-me/static
      - ./apps/that-me/migrations:/app/apps/that-me/migrations
      - ./apps/that-me/.wrangler/state:/app/apps/that-me/.wrangler/state
    environment:
      - AUTH0_DOMAIN=your-tenant.auth0.com
      - AUTH0_AUDIENCE=https://api.zatommy.example.com
      - AUTH_APP_URL=http://auth:38200
    depends_on:
      - auth
